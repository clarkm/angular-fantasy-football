<!DOCTYPE html>
<html ng-app="app">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.css">
    <link rel="stylesheet" href="style.css" />
  </head>
  <body ng-cloak>

    <div ng-controller="appController as vm">

      <div layout="column">

            <md-toolbar layout="row" style="background-color:rgb(0,82,135);">
              <div class="md-toolbar-tools">
                <h3>Arinc Direct</h3>
                <span flex></span>
                <a href="#" ng-click="vm.showAdvanced($event)">S</a>
                <md-button class="md-icon-button" aria-label="More" ng-click="vm.showAlert($event)">
                  <md-icon aria-hidden="false" style="color:white;" md-svg-src="gears.svg"></md-icon>
                </md-button>
              </div>
            </md-toolbar>


            <div class="container" layout="row" layout-wrap>

              <h3 flex="100">On the Clock: {{vm.teams[vm.index2].name}}</h3>
              <p>number of teams:
                <select ng-change="vm.updateTeamLimit()" ng-model="vm.teamSelectNumber">
                  <option value="8">8</option>
                  <option value="10">10</option>
                  <option value="12">12</option>
                </select>
                select number: {{vm.teamSelectNumber}}<br />
                limitNumber: {{vm.teamsLimitNumber}}
            </p>
              <md-content layout="row" flex="100">

                  <md-card flex="50">
                    <md-toolbar layout="row" style="background-color:rgb(0,82,135);">
                      <h3>Teams</h3>
                    </md-toolbar>

                    <md-input-container class="md-block">
                      <label>Team Name</label>
                      <input ng-model="vm.teamString">
                      <md-button ng-click="vm.addTeam(vm.teamString)">add team</md-button>
                    </md-input-container>


                  <div layout="row" layout-wrap>

                            <md-card flex="30" style="max-height:30vh;overflow:scroll;" ng-repeat="item in vm.teams" ng-click="vm.updateSelectedTeam(item);"
                            ng-class="item === vm.selectedTeam || index2 === vm.teams.length - 1? 'selected' : 'notselected'">
                              <md-card-header>
                                <md-card-avatar>
                                  {{ $index + 1 }}
                                </md-card-avatar>
                                <md-card-header-text>
                                  <span class="md-title">{{item.name}}</span>
                                  <span class="md-subhead" style="color:crimson;" ng-if="item.error">error message</span>
                                </md-card-header-text>
                              </md-card-header>

                              <md-card-content>
                                <p ng-repeat="player in item.players track by $index" style="margin:0;padding:0;">
                                    <span flex="grow">{{player.rank}}</span>
                                    <span flex="grow">{{player.name}}</span>
                                    <span flex="grow">{{player.pos}}</span>
                                    <span flex="grow">{{player.team}}</span>
                                    <span flex="grow">{{player.bye}}</span>
                                    <span flex="grow"><md-button ng-click="vm.removePlayer(player, item, $index)" style="margin:0;min-width:10px;">-</md-button></span>
                                    <md-divider flex="100" ng-if="!$last"></md-divider>
                                </p>
                              </md-card-content>
                            </md-card>


                   </div>
                  </md-card>


                  <md-card flex="50">
                    <md-toolbar layout="row" style="background-color:rgb(0,82,135);">
                      <h3>Players</h3>
                    </md-toolbar>


                  <md-input-container class="md-block">
                    <label>Search anything...</label>
                    <input ng-model="vm.searchTerm">
                  </md-input-container>

                  <md-toolbar layout="row" class="md-hue-3" style="background-color: rgb(250,250,250);border-bottom: 1px solid #eee;">
                    <div class="md-toolbar-tools">
                      <div flex="10"><a href="#" ng-click="sortType = 'rank*1'; sortReverse = !sortReverse">Rank
                        <span ng-show="sortType == 'rank*1' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="sortType == 'rank*1' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></a></div>
                      <div flex="35"><a href="#" ng-click="sortType = 'name'; sortReverse = !sortReverse">Name
                        <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></div>
                      <div flex="15"><a href="#" ng-click="sortType = 'pos'; sortReverse = !sortReverse">Position
                        <span ng-show="sortType == 'pos' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="sortType == 'pos' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></a></div>
                      <div flex="15"><a href="#" ng-click="sortType = 'team'; sortReverse = !sortReverse">Team
                        <span ng-show="sortType == 'team' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="sortType == 'team' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></a></div>
                      <div flex="10"><a href="#" ng-click="sortType = 'bye*1'; sortReverse = !sortReverse">Bye
                        <span ng-show="sortType == 'bye*1' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="sortType == 'bye*1' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></a></div>
                      <div flex="15">Add</div>
                    </div>
                  </md-toolbar>
                  <md-content style="height: 72vh;">
                    <md-list>
                      <md-list-item ng-repeat="player in vm.players | orderBy:sortType:sortReverse | filter:vm.searchTerm track by $index">
                          <div flex="10">{{player.rank}}</div>
                          <div flex="35">{{player.name}}</div>
                          <div flex="15">{{player.pos}}</div>
                          <div flex="15">{{player.team}}</div>
                          <div flex="10">{{player.bye}}</div>
                          <div flex="15"><md-button class="md-raised" ng-click="vm.addPlayer(player)">Add</md-button></div>
                        <md-divider inset></md-divider>
                      </md-list-item>
                    </md-list>
                  </md-content>

                </md-card>

              </md-content>
            </div>

        </div>

        <script type="text/ng-template" id="dialog1.tmpl.html"><md-dialog aria-label="Mango"  ng-cloak>
          <form>
            <md-toolbar>
              <div class="md-toolbar-tools">
                <h2>Settings</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="$dialog.hide()">
                  cancel
                </md-button>
              </div>
            </md-toolbar>

            <md-dialog-content>
              <div class="md-dialog-content">
                <p>number of teams:
                  <select ng-change="vm.updateTeamLimit()" ng-model="vm.teamSelectNumber">
                    <option value="8">8</option>
                    <option value="10">10</option>
                    <option value="12">12</option>
                  </select>
                  select number: {{vm.teamSelectNumber}}<br />
                  limitNumber: {{vm.teamsLimitNumber}}<br />
                    -- maybe add a colors and 'layout' (side-by-side or stacked) option to this!
              </p>
              </div>
            </md-dialog-content>

            <md-dialog-actions layout="row">
              <md-button href="#" md-autofocus>
                More
              </md-button>
            </md-dialog-actions>
          </form>
        </md-dialog>
        </script>

    </div>

     <!-- Angular Material requires Angular.js Libraries -->
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-animate.min.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-route.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-aria.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-messages.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-sanitize.js"></script>

     <!-- Angular Material Library -->
     <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.js"></script>


    <script src="scripts.js"></script>

  </body>
</html>
