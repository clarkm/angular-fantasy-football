<!DOCTYPE html>
<html ng-app="app">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.css">
    <link rel="stylesheet" href="style.css" />
  </head>
  <body ng-cloak>

    <div ng-controller="appController as vm">

      <div layout="column">

            <md-toolbar layout="row" style="background-color:rgb(0,82,135);">
              <div class="md-toolbar-tools">
                <h3>Live Hive</h3>
                <span flex></span>
                Settings: <md-button class="md-icon-button" aria-label="Settings" ng-click="vm.showAdvanced($event)">
                  <md-icon aria-hidden="false" style="color:white;" md-svg-src="gears.svg"></md-icon>
                </md-button>
              </div>
            </md-toolbar>


            <div class="container" layout="row" layout-wrap>

            <div layout="row" layout-align="center center" flex="100">
              <h4>On the Clock: <span style="font-size:200%;">{{vm.teams[vm.index2].name}}</span></h4>
            </div>

              <md-content layout="row" flex="100">

                  <md-card flex="60">
                    <md-toolbar layout="row" style="background-color:rgb(0,82,135);">
                      <h3>Teams ({{vm.teams.length}} of {{vm.teamSelectNumber}})</h3>
                    </md-toolbar>

                    <form ng-submit="vm.addTeam(vm.teamString)">
                      <md-input-container class="md-block">
                        <label>Team Name</label>
                        <input ng-model="vm.teamString" input-clear>
                        <md-button type="submit">add team</md-button>
                      </md-input-container>
                    </form>

                  <div layout="row" layout-wrap>

                      <md-card flex="30" style="height:30vh;overflow:hidden;position:relative;" ng-repeat="item in vm.teams" ng-click="vm.updateSelectedTeam(item);"
                      ng-class="item === vm.selectedTeam || index2 === vm.teams.length - 1? 'selected' : 'notselected'">
                        <md-subheader style="padding:0;position:absolute;top:0;width:100%;">
                          <md-card-header-text layout="row" layout-align="space-between center">
                            <span>{{ $index + 1 }}</span>
                            <span class="md-title" style="height: 36px;"><md-input-container style="margin:0;"><input aria-label="Team Name" ng-model="item.name" /></md-input-container></span>
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                            <span ng-if="item.players.length" layout="row" style="font-size: 80%;">
                              <b>Total: <br />{{item.players.length}}</b>
                              <b>WR:  <br />{{ vm.countPos(item.players,'WR') }}</b>
                              <b>RB:  <br />{{ vm.countPos(item.players,'RB') }}</b>
                              <b>QB:  <br />{{ vm.countPos(item.players,'QB') }}</b>
                              <b>TE:  <br />{{ vm.countPos(item.players,'TE') }}</b>
                              <b>DST:  <br />{{ vm.countPos(item.players,'DST') }}</b>
                              <b>K:  <br />{{ vm.countPos(item.players,'K') }}</b>
                            </span>
                            <a href="#" ng-click="vm.removeTeam(item)">X</a>
                            <span class="md-subhead" style="color:crimson;" ng-if="item.error">error message</span>
                          </md-card-header-text>
                        </md-subheader>

                        <md-card-content style="padding:8px;position: absolute;width: 100%;top: 34px;overflow: scroll;height: 80%;">
                          <p layout="row" layout-align="space-around center" ng-repeat="player in item.players | orderBy:sortTeamType:sortTeamReverse track by $index" style="margin:0;padding:0;" ng-class="{{player.pos}}">
                              <span flex="5" style="background-color:white;color:black;padding:10px 0;">{{$index + 1}}:</span>
                              <span flex="10" style="text-align:center;">{{player.rank}}</span>
                              <span flex="35">{{player.name}}</span>
                              <span flex="15">{{player.pos}}</span>
                              <span flex="15">{{player.team}}</span>
                              <span flex="10">{{player.bye}}</span>
                              <span flex="10"><md-button ng-click="vm.removePlayer(player, item, $index)" style="margin:0;min-width:10px;color:crimson;text-shadow: 2px 2px 3px rgba(255,255,255,0.7);">X</md-button></span>
                          </p>
                        </md-card-content>
                      </md-card>


                   </div>
                  </md-card>


                  <md-card flex="40">
                    <md-toolbar layout="row" layout-align="space-between center" style="background-color:rgb(0,82,135);">
                      <h3>Players</h3>
                      <span></span>
                      <span></span>
                      <span></span>
                      <p class="key">
                        <a href="#" ng-click="vm.buttonSearchTerm = ''" ng-class="K">ALL</a>
                        <a href="#" ng-click="vm.buttonSearchTerm = 'WR'" ng-class="WR">WR</a>
                        <a href="#" ng-click="vm.buttonSearchTerm = 'RB'" ng-class="RB">RB</a>
                        <a href="#" ng-click="vm.buttonSearchTerm = 'TE'" ng-class="TE">TE</a>
                        <a href="#" ng-click="vm.buttonSearchTerm = 'QB'" ng-class="QB">QB</a>
                        <a href="#" ng-click="vm.buttonSearchTerm = 'DST'" ng-class="DST">DST</a>
                        <a href="#" ng-click="vm.buttonSearchTerm = 'K'" ng-class="K" style="margin-right: 5px;">K</a>
                      </p>
                    </md-toolbar>


                  <md-input-container class="md-block">
                    <label>Search anything...</label>
                    <input ng-model="vm.searchTerm" input-clear>
                  </md-input-container>

                  <md-toolbar layout="row" class="md-hue-3" style="background-color: rgb(250,250,250);border-bottom: 1px solid #eee;">
                    <div class="md-toolbar-tools">
                      <div flex="10"><a href="#" ng-click="vm.sortType = 'rank*1'; sortReverse = !sortReverse">Rank
                        <span ng-show="vm.sortType == 'rank*1' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="vm.sortType == 'rank*1' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></div>
                      <div flex="35"><a href="#" ng-click="vm.sortType = 'name'; sortReverse = !sortReverse">Name
                        <span ng-show="vm.sortType == 'name' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="vm.sortType == 'name' && sortReverse" class="fa fa-caret-up">&#9650;</span></div>
                      <div flex="15"><a href="#" ng-click="vm.sortType = 'pos'; sortReverse = !sortReverse">Position
                        <span ng-show="vm.sortType == 'pos' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="vm.sortType == 'pos' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></div>
                      <div flex="15"><a href="#" ng-click="vm.sortType = 'team'; sortReverse = !sortReverse">Team
                        <span ng-show="vm.sortType == 'team' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="vm.sortType == 'team' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></div>
                      <div flex="10"><a href="#" ng-click="vm.sortType = 'bye*1'; sortReverse = !sortReverse">Bye
                        <span ng-show="vm.sortType == 'bye*1' && !sortReverse" class="fa fa-caret-down">&#9660;</span>
                        <span ng-show="vm.sortType == 'bye*1' && sortReverse" class="fa fa-caret-up">&#9650;</span></a></div>
                      <div flex="15">Add</div>
                    </div>
                  </md-toolbar>
                  <md-content style="height: 72vh;">
                    <md-list>
                      <md-list-item ng-repeat="player in vm.players | orderBy:vm.sortType:sortReverse | filter:vm.searchTerm | filter:{pos:vm.buttonSearchTerm} track by $index" ng-class="{{player.pos}}">
                          <div flex="10" style="text-align:center;">{{player.rank}}</div>
                          <div flex="35">{{player.name}}</div>
                          <div flex="15">{{player.pos}}</div>
                          <div flex="15">{{player.team}}</div>
                          <div flex="10">{{player.bye}}</div>
                          <div flex="15"><md-button class="md-raised" ng-click="vm.addPlayer(player)">Add</md-button></div>
                        <md-divider inset></md-divider>
                      </md-list-item>
                    </md-list>
                  </md-content>

                </md-card>

              </md-content>
            </div>

        </div>

        <script type="text/ng-template" id="dialog1.tmpl.html"><md-dialog aria-label="Settings Dialog" ng-cloak>
          <form>
            <md-toolbar style="background-color:rgb(0,82,135);">
              <div class="md-toolbar-tools">
                <h2>Settings</h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="vm.hideDialog()">
                  X
                </md-button>
              </div>
            </md-toolbar>

            <md-dialog-content>
              <div class="md-dialog-content">
                <p>Maximum teams:
                  <select ng-model="vm.teamSelectNumber">
                    <option value="8">8</option>
                    <option value="10">10</option>
                    <option value="12">12</option>
                  </select>
              </p>
              <p>Maximum players on a team:
                <select ng-model="vm.maxPlayersPerTeam">
                  <option value="15">15</option>
                  <option value="16">16</option>
                  <option value="17">17</option>
                  <option value="18">18</option>
                </select>
            </p>
              </div>
            </md-dialog-content>
          </form>
        </md-dialog>
        </script>

    </div>

     <!-- Angular Material requires Angular.js Libraries -->
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-animate.min.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-route.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-aria.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-messages.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-sanitize.js"></script>

     <!-- Angular Material Library -->
     <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.js"></script>


    <script src="scripts.js"></script>

  </body>
</html>
